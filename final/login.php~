<html>
    <head>
        <title>Login</title>
    </head>
</html>
<?php
    session_start();
    require_once "connect.php";
    $error = "";

    if (isset($_POST["submit"]))
    {
        echo "<p>test</p>";
        $username = $_POST["username"];
        $password = $_POST["password"];
        
        $sql = "SELECT username FROM users WHERE username='$username' AND password='$password'";

        $result = $db->query($sql);

        //Check that there is exactly 1 matching username and password
        if ($result->num_rows === 1)
        {
            echo "<p>it worked</p>";
            $_SESSION["username"] = $username;
            header("Location: home.php");
        }
        else
        {
            echo "<p>caught</p>";
            echo '<script>alert("Wrong username/password combination");</script>';
            header("Location: index.html");
        }
    }
?>
